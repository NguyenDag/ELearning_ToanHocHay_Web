@{
	ViewData["Title"] = "Gửi lại email xác nhận";
}

<div class="container mt-5">
	<div class="row justify-content-center">
		<div class="col-md-6">
			<div class="card shadow-lg border-0">
				<div class="card-body p-5">
					<!-- Icon và tiêu đề -->
					<div class="text-center mb-4">
						<div class="mb-3">
							<i class="fas fa-envelope-open-text fa-4x text-primary"></i>
						</div>
						<h2 class="fw-bold text-dark">Gửi lại email xác nhận</h2>
						<p class="text-muted">
							Nhập địa chỉ email của bạn và chúng tôi sẽ gửi lại liên kết xác nhận
						</p>
					</div>

					<!-- Hiển thị lỗi nếu có -->
					@if (ViewBag.Error != null)
					{
						<div class="alert alert-danger alert-dismissible fade show" role="alert">
							<i class="fas fa-exclamation-circle me-2"></i>
							@ViewBag.Error
							<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
						</div>
					}

					<!-- Form -->
					<form asp-controller="Account"
						  asp-action="ResendConfirmationEmail"
						  method="post"
						  id="resendForm">

						<div class="mb-4">
							<label for="email" class="form-label fw-semibold">
								<i class="fas fa-envelope me-2"></i>Địa chỉ Email
							</label>
							<input type="email"
								   class="form-control form-control-lg"
								   id="email"
								   name="email"
								   placeholder="example@email.com"
								   required
								   autocomplete="email">
							<div class="invalid-feedback">
								Vui lòng nhập địa chỉ email hợp lệ.
							</div>
						</div>

						<!-- Nút submit -->
						<div class="d-grid gap-2 mb-3">
							<button type="submit" class="btn btn-primary btn-lg" id="submitBtn">
								<span class="btn-text">
									<i class="fas fa-paper-plane me-2"></i>Gửi email xác nhận
								</span>
								<span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
								<span class="loading-text d-none">Đang gửi...</span>
							</button>
						</div>

						<!-- Liên kết quay lại -->
						<div class="text-center">
							<a asp-controller="Account"
							   asp-action="Login"
							   class="text-decoration-none">
								<i class="fas fa-arrow-left me-2"></i>Quay lại đăng nhập
							</a>
						</div>
					</form>

					<!-- Thông tin bổ sung -->
					<div class="alert alert-info mt-4 mb-0" role="alert">
						<i class="fas fa-info-circle me-2"></i>
						<small>
							<strong>Lưu ý:</strong> Kiểm tra cả hộp thư spam nếu bạn không nhận được email.
						</small>
					</div>
				</div>
			</div>

			<!-- Card hỗ trợ -->
			<div class="card mt-3 border-0 bg-light">
				<div class="card-body text-center py-3">
					<small class="text-muted">
						Cần trợ giúp?
						<a asp-controller="Support"
						   asp-action="Contact"
						   class="text-decoration-none fw-semibold">
							Liên hệ hỗ trợ
						</a>
					</small>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- CSS tùy chỉnh -->
<style>
	.card {
		border-radius: 15px;
		transition: transform 0.3s ease;
	}

		.card:hover {
			transform: translateY(-5px);
		}

	.form-control:focus {
		border-color: #0d6efd;
		box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.15);
	}

	.btn-primary {
		border-radius: 10px;
		padding: 12px;
		font-weight: 600;
		transition: all 0.3s ease;
	}

		.btn-primary:hover:not(:disabled) {
			transform: translateY(-2px);
			box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
		}

		.btn-primary:disabled {
			cursor: not-allowed;
			opacity: 0.7;
		}

	.text-primary {
		color: #0d6efd !important;
	}

	.alert {
		border-radius: 10px;
		border: none;
	}

	.alert-info {
		background-color: #e7f3ff;
		color: #004085;
	}

	.alert-danger {
		background-color: #f8d7da;
		color: #721c24;
	}

	@@media (max-width: 576px) {
		.card-body

	{
		padding: 2rem !important;
	}

	}
</style>

@section Scripts {
	<partial name="_ValidationScriptsPartial" />

	<!-- Font Awesome (nếu chưa có trong _Layout) -->
	<link rel="stylesheet"
		  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

	<script>
		// Form validation và loading state
		document.getElementById('resendForm').addEventListener('submit', function(e) {
			const emailInput = document.getElementById('email');
			const submitBtn = document.getElementById('submitBtn');

			// Validate email
			if (!emailInput.value || !emailInput.checkValidity()) {
				emailInput.classList.add('is-invalid');
				e.preventDefault();
				return false;
			}

			// Show loading state
			submitBtn.disabled = true;
			submitBtn.querySelector('.btn-text').classList.add('d-none');
			submitBtn.querySelector('.spinner-border').classList.remove('d-none');
			submitBtn.querySelector('.loading-text').classList.remove('d-none');
		});

		// Remove invalid class on input
		document.getElementById('email').addEventListener('input', function() {
			this.classList.remove('is-invalid');
		});

		// Auto dismiss alert after 5 seconds
		const alertElement = document.querySelector('.alert-danger');
		if (alertElement) {
			setTimeout(() => {
				const bsAlert = new bootstrap.Alert(alertElement);
				bsAlert.close();
			}, 5000);
		}
	</script>
}